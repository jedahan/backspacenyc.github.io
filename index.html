<script src="//js/moon@0.11.js"></script>

<style>
  body {
    display: grid;
    grid-gap: 1em;
    grid-template-colums: 6fr;
    height: 80%;
    width: 1280px;
    color: white;
    font-family: 'Open Sans', sans-serif;
  }


  h1, h2, h3, h4, h5 {
    font-family: 'Megrim', cursive;
  }

  @font-face {
    font-family: "Open Sans";
    src: url("/fonts/Open_Sans/OpenSans-Regular.ttf");
  }

  @font-face {
    font-family: "Megrim";
    src: url("/fonts/Megrim/Megrim.ttf");
  }

  #week {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-column: 5/6;
    grid-gap: 1em;
    background-color: salmon;
  }

  .day {
    background-color: steelblue;
  }

  #blocks {
    grid-column: 6;
    background-color: lightgreen;
  }

  .block {
    margin: 1em;
    padding: 1em;
    background-color: lightsalmon;
  }

</style>

<script>
  var counter=0;
  function dragstart_handler(ev) {
    ev.dataTransfer.setData("text/plain", ev.target.id);
    ev.dataTransfer.dropEffect = "copy";
  }

  function dragover_handler(ev) {
//    ev.preventDefault();
    ev.dataTransfer.dropEffect = "copy"
  }

  function drop_handler(ev) {
//    ev.preventDefault();
    console.log('aaa');
    var id = ev.dataTransfer.getData("text");
    console.log('aa');
    var nodeCopy = document.getElementById(id).cloneNode(true);
    console.log('a');
    nodeCopy.id += counter++;
    console.log('b');
    ev.target.appendChild(nodeCopy);
    console.log('c');
  }

  window.onload = function() {
    var days = Array.from(document.getElementsByClassName('day'));
    console.log('days are', days);
    days.forEach(function(day) {
      day.addEventListener('drop', drop_handler, true);
      day.addEventListener('dragover', dragover_handler, true);
    });

    var blocks = Array.from(document.getElementsByClassName('block'));
    console.log('blocks are', blocks);
    blocks.forEach(function(block) {
      block.addEventListener('dragstart', dragstart_handler, true);
    });
  }
</script>

<body>
  <div id=week>
    <section class=day id=monday>
      <h1>monday</h1>
    </section>
    <section class=day id=tuesday>
      <h1>tuesday</h1>
    </section>
    <section class=day id=wednesday>
      <h1>wednesday</h1>
    </section>
    <section class=day id=thursday>
      <h1>thursday</h1>
    </section>
    <section class=day id=friday>
      <h1>friday</h1>
    </section>
  </div>

  <div id=blocks>
    <section draggable=true class=block id=japanese>learn japanese</section>
    <section draggable=true class=block id=workout>workout</section>
    <section draggable=true class=block id=nsf>nsf</section>
    <section draggable=true class=block id=smalldata>smalldata</section>
  </div>
</body>
